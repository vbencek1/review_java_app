<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:a="http://xmlns.jcp.org/jsf/passthrough">

    <ui:define name="title">#{viewBookDetails.bookName}</ui:define>

    <ui:define name="content">   
        <div class="div-bookDetails">
            <div class="div-bookDetails-imgGradeContainer">
                <div class="div-bookDetails-image-container">
                    <img src="resources/images/book_placeholder.jpg" alt="book_placeholder"/>
                </div>
                <div class="div-bookDetails-gradeContainer">
                    <div class="div-bookDetails-text-container">
                        <h:outputLabel class="div-bookDetails-details-orange" value="#{l['viewBookDetails.lastRating']}"/>
                        <h:outputLabel class="div-bookDetails-details" value="06.06.2012 14:33"/>
                    </div>
                    <div class="div-bookDetails-text-container">
                        <h:outputLabel class="div-bookDetails-details-orange" value="#{l['viewBookDetails.avgRating']}"/>
                        <h:outputLabel class="div-bookDetails-details" style="color: #048BA8" value="(4.4)"/>
                        <div class="ratings">
                            <div class="empty-stars"></div>
                            <div class="full-stars" style="width:75%"></div>
                        </div>
                    </div>
                    <div class="div-bookDetails-text-container">
                        <h:outputLabel class="div-bookDetails-details-orange" value="#{l['viewBookDetails.NOReviews']}"/>
                        <h:outputLabel class="div-bookDetails-details" value="36"/>
                    </div>
                </div>
                <h:commandButton id="btnAddReview" class="div-bookDetails-addReviewBtn" value="#{l['viewBookDetails.addReview']}" onclick="showReviewForm()"/>
                <div id="divReviewForm" class="div-bookDetails-gradeContainer" style="display:none;">
                    <h:inputTextarea class="div-bookDetails-review-textbox" a:placeholder="#{l['viewBookDetails.writeReview']}"/>
                    <h:selectOneMenu class="div-bookDetails-review-gradeSelect" style="margin-right: 10px;">
                        <f:selectItem itemLabel="5 &#9734;&#9734;&#9734;&#9734;&#9734;" itemValue="5"/>
                        <f:selectItem itemLabel="4 &#9734;&#9734;&#9734;&#9734;" itemValue="4"/>
                        <f:selectItem itemLabel="3 &#9734;&#9734;&#9734;" itemValue="3"/>
                        <f:selectItem itemLabel="2 &#9734;&#9734;" itemValue="2"/>
                        <f:selectItem itemLabel="1 &#9734;" itemValue="1"/>
                    </h:selectOneMenu>
                    <h:selectOneMenu class="div-bookDetails-review-gradeSelect">
                        <f:selectItem itemLabel="#{l["combobox.comment.private"]}" itemValue="0"/>
                        <f:selectItem itemLabel="#{l["combobox.comment.public"]}" itemValue="1"/>
                    </h:selectOneMenu>
                    <h:commandButton class="div-bookDetails-addReviewBtn" style="float:right;" value="#{l['viewBookDetails.rate']}"/>
                </div>

                <h:commandButton id="btnToggleComments" class="div-bookDetails-toogleBtn" value="#{l['viewBookDetails.toogleReviews']}" onclick="showComments()"/>
            </div>
            <div class="div-bookDetails-header">
                <h:outputLabel class="div-bookDetails-header-text" value="DRUŽBA PERE KRVŽICE"/>
                <h:form>
                    <h:selectBooleanCheckbox title="#{l['viewBookDetails.starText']}" id="btnStar" class="star"
                                             value="#{viewBookDetails.notFavorite}" 
                                             valueChangeListener="#{viewBookDetails.addBookToCollection()}"
                                             onclick="submit()"/>
                </h:form>
            </div>
            <div class="div-bookDetails-maintxtContainer">
                <div class="div-bookDetails-text-container">
                    <h:outputLabel class="div-bookDetails-details-orange" value="ISBN: "/>
                    <h:outputLabel class="div-bookDetails-details" value="234123412311"/>
                </div>
                <div class="div-bookDetails-text-container">
                    <h:outputLabel class="div-bookDetails-details-orange" value="#{l['viewBookDetails.author']}"/>
                    <h:outputLabel class="div-bookDetails-details" value="Tino Autor Tinek"/>
                </div>
                <div class="div-bookDetails-text-container">
                    <h:outputLabel class="div-bookDetails-details-orange" value="#{l['viewBookDetails.publisher']}"/>
                    <h:outputLabel class="div-bookDetails-details" value="Petrijanec Print"/>
                </div>
                <div class="div-bookDetails-text-container">
                    <h:outputLabel class="div-bookDetails-details-orange" value="#{l['viewBookDetails.publishYear']}"/>
                    <h:outputLabel class="div-bookDetails-details" value="1973."/>
                </div> 
            </div>
            <div class="div-bookDetails-subtxtContainer">
                <div class="div-bookDetails-text-container">
                    <div class="div-bookDetails-text-container">
                        <h:outputLabel class="div-bookDetails-details-orange" value="#{l['viewBookDetails.description']}"/>
                        <h:outputLabel class="div-bookDetails-details" value="tekst tekst tekst tekst tekst tekst tekst tekst tekst tekst tekst tekst tekst tekst tekst tekst tekst tekst tekst tekst tekst tekst tekst tekst tekst tekst tekst tekst tekst tekst"/>
                    </div>
                    <h:outputLabel class="div-bookDetails-details-orange" value="#{l['viewBookDetails.NOPages']}"/>
                    <h:outputLabel class="div-bookDetails-details" value="323"/>
                </div>
                <div class="div-bookDetails-text-container">
                    <h:outputLabel class="div-bookDetails-details-orange" value="#{l['viewBookDetails.Language']}"/>
                    <h:outputLabel class="div-bookDetails-details" value="ENG"/>
                </div>
            </div>           
            <div id="divComments" class="div-bookDetails-comments">
                <h:form id="form-comments">
                    <div class="div-bookDetails-divBtnComments">
                        <p:commandButton id="btnNext" class="div-bookDetails-review-btnScroll" value="#{l['viewBookDetails.btnNext']}&gt;&gt;" action="#{viewBookDetails.loadNextComments()}" update="form-comments"/>
                        <p:commandButton id="btnPrevoius" class="div-bookDetails-review-btnScroll" value="&lt;&lt;#{l['viewBookDetails.btnPrevious']}" action="#{viewBookDetails.loadPreviousComments()}" update="form-comments"/>
                    </div>
                    <ui:repeat id="repeater" value="#{viewBookDetails.komentari(viewBookDetails.pageNum)}" var="row">
                        <div class="div-bookDetails-SingleComment">
                            <div class="div-bookDetails-SingleComment-header">
                                <h:outputLabel value="#{row.korisnik}"/>
                                <div class="ratings">
                                    <div class="empty-stars"></div>
                                    <div class="full-stars" style="width:#{viewBookDetails.convertToWidth(row.ocjena)}"></div>
                                </div>
                                <h:outputLabel class="div-bookDetails-SingleComment-date" value="12.04 2019. 13:33"/>
                            </div>
                            <div class="div-bookDetails-SingleComment-body">
                                <h:outputText value="#{row.komentar}"/>
                            </div>
                        </div>
                    </ui:repeat>
                </h:form>
            </div>
        </div>
    </ui:define>
</ui:composition>

